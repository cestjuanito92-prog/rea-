<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Valentine</title>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    :root { --bg1: #ffd6e7; --bg2: #ffeef6; --card: #ffffffcc; --yes: #ff3b7a; --yesHover: #ff1f68; }
    * { box-sizing: border-box; }
    body { margin: 0; min-height: 100svh; display: grid; place-items: center; background: radial-gradient(circle at top, var(--bg2), var(--bg1)); font-family: system-ui, sans-serif; overflow: hidden; padding: 16px; }
    .card { width: min(720px, 92vw); padding: 26px 22px; background: var(--card); backdrop-filter: blur(10px); border-radius: 22px; text-align: center; box-shadow: 0 18px 60px rgba(0,0,0,.15); position: relative; z-index: 10; }
    .art { width: min(200px, 60vw); margin: 0 auto 10px; display: block; }
    h1 { font-size: clamp(22px, 3.8vw, 40px); margin: 12px 0 18px; line-height: 1.15; }
    .button-zone { position: relative; width: 100%; height: 200px; margin: 0 auto; touch-action: none; }
    button { position: absolute; top: 50%; transform: translateY(-50%); padding: 16px 24px; font-size: 18px; font-weight: 800; border-radius: 999px; border: none; cursor: pointer; box-shadow: 0 10px 24px rgba(0,0,0,.14); user-select: none; transition: all 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275); white-space: nowrap; }
    #yesBtn { left: 15%; background: var(--yes); color: #fff; z-index: 20; }
    #noBtn { left: 60%; background: #e5e7eb; color: #111827; transition: left 0.2s ease, top 0.2s ease; }
    .result { display: none; margin-top: 18px; animation: pop .35s ease; }
    @keyframes pop { from { transform: scale(.96); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    .cats { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 15px; }
    .cats img { width: 110px; height: 110px; object-fit: cover; border-radius: 14px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    #typedText { font-size: clamp(24px, 4vw, 36px); font-weight: 900; color: #ff3b7a; margin: 0; }
  </style>
</head>
<body>
  <main class="card">
    <div id="main-content">
        <img class="art" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHJueGZ3bmZicm90eXBtZzU0NHpneHBoZTRueGZ6bmZueGZ6bmZueCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/cLS1cfxvGOPVpf9g3y/giphy.gif" alt="Cute animal">
        <h1>REA, acceptes-tu d’être ma valentine ?</h1>
        <section class="button-zone" id="zone">
          <button id="yesBtn">OUI !</button>
          <button id="noBtn">on verra</button>
        </section>
    </div>

    <section class="result" id="result">
      <div class="cats">
        <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif">
        <img src="https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZzhic3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3R4Z3ZSZW5mJmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1n/1000/giphy.gif">
        <img src="https://media.giphy.com/media/ICOgLC66v6vO60Hogz/giphy.gif">
      </div>
      <h2 id="typedText">t'avais intérêt <3</h2>
    </section>
  </main>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const mainContent = document.getElementById("main-content");
    const zone = document.getElementById("zone");

    let yesScale = 1;

    function moveNo() {
        const padding = 20;
        const x = Math.random() * (zone.offsetWidth - noBtn.offsetWidth - (padding * 2)) + padding;
        const y = Math.random() * (zone.offsetHeight - noBtn.offsetHeight - (padding * 2)) + padding;
        
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
        
        // Fait grossir le bouton OUI
        yesScale += 0.2;
        yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    // Détection de proximité pour que le bouton bouge AVANT qu'on ne le touche
    document.addEventListener("mousemove", (e) => {
        const rect = noBtn.getBoundingClientRect();
        const distance = Math.hypot(e.clientX - (rect.left + rect.width/2), e.clientY - (rect.top + rect.height/2));
        
        if (distance < 100) { // Si la souris est à moins de 100 pixels
            moveNo();
        }
    });

    // Pour le tactile (mobile)
    noBtn.addEventListener("touchstart", (e) => {
        e.preventDefault();
        moveNo();
    });

    yesBtn.addEventListener("click", () => {
      mainContent.style.display = "none";
      result.style.display = "block";
      
      // Confettis qui tournent en boucle (non-stop)
      const end = Date.now() + (1000 * 60 * 5); // 5 minutes de fête !

      (function frame() {
        confetti({
          particleCount: 3,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: ['#ff3b7a', '#ffadad', '#ffd6e7']
        });
        confetti({
          particleCount: 3,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: ['#ff3b7a', '#ffadad', '#ffd6e7']
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      }());
    });
  </script>
</body>
</html>
